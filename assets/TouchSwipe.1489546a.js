import{aw as D,ah as l,C as M,aG as L,K as h,aH as w,W as x,M as g,J as F}from"./index.7d689aa6.js";import{g as S,s as _,c as E}from"./selection.fdd062ff.js";let c=[],v=[];function P(t){v=v.filter(s=>s!==t)}function Y(t){P(t),v.push(t)}function $(t){P(t),v.length===0&&c.length!==0&&(c[c.length-1](),c=[])}function A(t){v.length===0?t():c.push(t)}function k(t){c=c.filter(s=>s!==t)}function T(t){const s=[.06,6,50];return typeof t=="string"&&t.length&&t.split(":").forEach((u,a)=>{const p=parseFloat(u);p&&(s[a]=p)}),s}var z=D({name:"touch-swipe",beforeMount(t,{value:s,arg:u,modifiers:a}){if(a.mouse!==!0&&l.has.touch!==!0)return;const p=a.mouseCapture===!0?"Capture":"",e={handler:s,sensitivity:T(u),direction:S(a),noop:M,mouseStart(i){_(i,e)&&L(i)&&(h(e,"temp",[[document,"mousemove","move",`notPassive${p}`],[document,"mouseup","end","notPassiveCapture"]]),e.start(i,!0))},touchStart(i){if(_(i,e)){const r=i.target;h(e,"temp",[[r,"touchmove","move","notPassiveCapture"],[r,"touchcancel","end","notPassiveCapture"],[r,"touchend","end","notPassiveCapture"]]),e.start(i)}},start(i,r){l.is.firefox===!0&&w(t,!0);const d=x(i);e.event={x:d.left,y:d.top,time:Date.now(),mouse:r===!0,dir:!1}},move(i){if(e.event===void 0)return;if(e.event.dir!==!1){g(i);return}const r=Date.now()-e.event.time;if(r===0)return;const d=x(i),f=d.left-e.event.x,n=Math.abs(f),m=d.top-e.event.y,o=Math.abs(m);if(e.event.mouse!==!0){if(n<e.sensitivity[1]&&o<e.sensitivity[1]){e.end(i);return}}else if(window.getSelection().toString()!==""){e.end(i);return}else if(n<e.sensitivity[2]&&o<e.sensitivity[2])return;const y=n/r,C=o/r;e.direction.vertical===!0&&n<o&&n<100&&C>e.sensitivity[0]&&(e.event.dir=m<0?"up":"down"),e.direction.horizontal===!0&&n>o&&o<100&&y>e.sensitivity[0]&&(e.event.dir=f<0?"left":"right"),e.direction.up===!0&&n<o&&m<0&&n<100&&C>e.sensitivity[0]&&(e.event.dir="up"),e.direction.down===!0&&n<o&&m>0&&n<100&&C>e.sensitivity[0]&&(e.event.dir="down"),e.direction.left===!0&&n>o&&f<0&&o<100&&y>e.sensitivity[0]&&(e.event.dir="left"),e.direction.right===!0&&n>o&&f>0&&o<100&&y>e.sensitivity[0]&&(e.event.dir="right"),e.event.dir!==!1?(g(i),e.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),E(),e.styleCleanup=q=>{e.styleCleanup=void 0,document.body.classList.remove("non-selectable");const b=()=>{document.body.classList.remove("no-pointer-events--children")};q===!0?setTimeout(b,50):b()}),e.handler({evt:i,touch:e.event.mouse!==!0,mouse:e.event.mouse,direction:e.event.dir,duration:r,distance:{x:n,y:o}})):e.end(i)},end(i){e.event!==void 0&&(F(e,"temp"),l.is.firefox===!0&&w(t,!1),e.styleCleanup!==void 0&&e.styleCleanup(!0),i!==void 0&&e.event.dir!==!1&&g(i),e.event=void 0)}};if(t.__qtouchswipe=e,a.mouse===!0){const i=a.mouseCapture===!0||a.mousecapture===!0?"Capture":"";h(e,"main",[[t,"mousedown","mouseStart",`passive${i}`]])}l.has.touch===!0&&h(e,"main",[[t,"touchstart","touchStart",`passive${a.capture===!0?"Capture":""}`],[t,"touchmove","noop","notPassiveCapture"]])},updated(t,s){const u=t.__qtouchswipe;u!==void 0&&(s.oldValue!==s.value&&(typeof s.value!="function"&&u.end(),u.handler=s.value),u.direction=S(s.modifiers))},beforeUnmount(t){const s=t.__qtouchswipe;s!==void 0&&(F(s,"main"),F(s,"temp"),l.is.firefox===!0&&w(t,!1),s.styleCleanup!==void 0&&s.styleCleanup(),delete t.__qtouchswipe)}});export{z as T,A as a,Y as b,k as c,$ as r};
