import{d as Q,c as _,aT as V,k as y,p as I,B as $,l as g,m as r,f as s,$ as w,u as S,Y as D,t as T,Q as F,a1 as Y,F as N,_ as L,r as A,w as B,o as R,A as v,a7 as q,z,v as E}from"./index.7d689aa6.js";import{Q as P}from"./QCardActions.b81893af.js";import{Q as k}from"./QSeparator.45472c01.js";import{I as M}from"./icons.22af156c.js";import{e as b,Q as U}from"./rtl.0b4379f4.js";import{Q as x,a as j,b as G}from"./QItem.7fbffb93.js";import{Q as C}from"./QItemLabel.95564c13.js";import{D as e}from"./notification.utils.d07b912b.js";const H=Q({__name:"DiaryDayItem",props:{day:{type:Object,required:!0}},setup(h){const a=h,d=_(()=>e.toPlanetaryDay(e.timestampToDate(a.day.startDateTime))),l=_(()=>e.timestampToDay(a.day.startDateTime));V();const n=b(),m=()=>{n.retrieveMyDayById(a.day.id)};return(c,o)=>{var t;return y(),I(N,null,[$((y(),g(j,{clickable:"",class:S([{highlight:((t=Y(n).day)==null?void 0:t.id)==a.day.id},"app-list-item rounded-borders"]),onClick:o[0]||(o[0]=i=>m())},{default:r(()=>[s(x,{avatar:"",class:"item-icon-section"},{default:r(()=>[s(w,{rounded:"",class:S(["item-icon",`item-icon-${d.value.planet}`])},{default:r(()=>[D(T(l.value),1)]),_:1},8,["class"])]),_:1}),s(x,null,{default:r(()=>[a.day.title?(y(),g(C,{key:0,class:"text-color-primary"},{default:r(()=>[D(T(a.day.title),1)]),_:1})):(y(),g(C,{key:1,class:"text-color-primary half-dimmed"},{default:r(()=>o[1]||(o[1]=[D("No Title")])),_:1})),s(C,{caption:""},{default:r(()=>[D("entries: "+T(a.day.entriesCount),1)]),_:1})]),_:1}),s(x,{avatar:""},{default:r(()=>[s(F,{class:"list-item-chevron",name:"eva-arrow-ios-forward-outline"})]),_:1})]),_:1},8,["class"])),[[L]]),s(k,{spaced:"",inset:"item"})],64)}}});const O=Q({__name:"DiaryNovigationCalendarPanel",setup(h){const a=b(),d=A(e.getTodayDate()),l=_(()=>a.day?e.timestampToDate(a.day.startDateTime):null);B(d,t=>{var p;if(e.timestampToDate((p=a.day)==null?void 0:p.startDateTime)===t)return;const i=a.days.filter(f=>e.timestampToDate(f.startDateTime)===t)[0];a.retrieveMyDayById(i.id)}),B(l,t=>{d.value=t});const n=_(()=>{let t=e.getTodayDate();a.selectedMonth&&a.selectedYear?(t=e.setMonth(t,a.selectedMonth),t=e.setYear(t,a.selectedYear)):(a.setSelectedMonth(e.getMonth(t)),a.setSelectedYear(e.getYear(t)))});_(()=>e.getYear(n.value)>e.getYear(e.getTodayDate())||e.getYear(n.value)==e.getYear(e.getTodayDate())&&e.getMonth(n.value)>=e.getMonth(e.getTodayDate())),R(()=>{m()});const m=t=>{const i=t?t.month:e.getMonth(d.value),p=t?t.year:e.getYear(d.value);a.setSelectedMonth(i),a.setSelectedYear(p),c()},c=t=>{const i={day:t,month:a.selectedMonth,year:a.selectedYear};a.searchDays(i)},o=t=>e.isDateInTheFuture(t.replace("/","-").replace("/","-"));return(t,i)=>{const p=v("scroll-area"),f=v("app-tab-panel");return y(),g(f,null,{default:r(()=>[s(U,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=u=>d.value=u),onNavigation:m,minimal:"",flat:"",style:{width:"auto"},mask:"YYYY-MM-DD",options:o},null,8,["modelValue"]),s(k),s(p,{class:"days-list-height"},{default:r(()=>[s(G,{class:"q-pa-sm",separator:""},{default:r(()=>[(y(!0),I(N,null,q(Y(a).days,u=>(y(),g(H,{key:u.id,day:u},null,8,["day"]))),128))]),_:1})]),_:1})]),_:1})}}}),J={class:"q-gutter-x-xs"},se=Q({__name:"DiaryNavigationCard",emits:["close"],setup(h,{emit:a}){const d=a,l=A("calendar"),n=b(),m=_(()=>{let c=e.getTodayDate();n.selectedMonth&&n.selectedYear?(c=e.setMonth(c,n.selectedMonth),c=e.setYear(c,n.selectedYear)):(n.setSelectedMonth(e.getMonth(c)),n.setSelectedYear(e.getYear(c)))});return _(()=>e.getYear(m.value)>e.getYear(e.getTodayDate())||e.getYear(m.value)==e.getYear(e.getTodayDate())&&e.getMonth(m.value)>=e.getMonth(e.getTodayDate())),(c,o)=>{const t=v("AppBtn"),i=v("app-tab-panel"),p=v("app-tab-panels"),f=v("app-card");return y(),g(f,null,{default:r(()=>[s(P,{align:"between"},{default:r(()=>[z("div",J,[s(t,{icon:Y(M).CALENDAR,onClick:o[0]||(o[0]=u=>l.value="calendar"),"text-color":l.value=="calendar"?"primary":""},null,8,["icon","text-color"]),s(t,{icon:Y(M).TAG,onClick:o[1]||(o[1]=u=>l.value="tags"),"text-color":l.value=="tags"?"primary":""},null,8,["icon","text-color"]),s(t,{icon:Y(M).SEARCH,onClick:o[2]||(o[2]=u=>l.value="search"),"text-color":l.value=="search"?"primary":""},null,8,["icon","text-color"])]),s(E,{flat:"",dense:"",round:"",icon:"eva-menu-arrow-outline",onClick:o[3]||(o[3]=u=>d("close")),size:"sm",class:"app-text-caption"})]),_:1}),s(k),s(p,{modelValue:l.value,"onUpdate:modelValue":o[4]||(o[4]=u=>l.value=u),vertical:""},{default:r(()=>[s(O,{name:"calendar"}),s(i,{name:"tags"},{default:r(()=>o[5]||(o[5]=[D("tags")])),_:1}),s(i,{name:"search"},{default:r(()=>o[6]||(o[6]=[D("search")])),_:1})]),_:1},8,["modelValue"])]),_:1})}}});export{se as _};
